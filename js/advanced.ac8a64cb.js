"use strict";(self["webpackChunksave_file_converter"]=self["webpackChunksave_file_converter"]||[]).push([[275],{4709:function(e,t,s){s.r(t),s.d(t,{default:function(){return kt}});var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"home"},[t("AdvancedUtils",{attrs:{initialTab:this.initialTab}})],1)},r=[],i=function(){var e=this,t=e._self._c;return t("div",[t("b-container",[t("b-tabs",{attrs:{"content-class":"mt-3",justified:""},model:{value:e.tabIndex,callback:function(t){e.tabIndex=t},expression:"tabIndex"}},[t("b-tab",{attrs:{title:"Resize"}},[t("tab-resize",{ref:"tabResize"})],1),t("b-tab",{attrs:{title:"Endian swap"}},[t("tab-endian-swap",{ref:"tabEndianSwap"})],1),t("b-tab",{attrs:{title:"Slice"}},[t("tab-slice",{ref:"tabSlice"})],1),t("b-tab",{attrs:{title:"File compare"}},[t("tab-file-compare",{ref:"tabFileCompare"})],1),t("b-tab",{attrs:{title:"Remove header/footer"}},[t("tab-remove-header-footer",{ref:"tabRemoveHeaderFooter"})],1),t("b-tab",{attrs:{title:"Add header/footer"}},[t("tab-add-header-footer",{ref:"tabAddHeaderFooter"})],1),t("b-tab",{attrs:{title:"Compression"}},[t("tab-compression",{ref:"tabCompression"})],1),t("b-tab",{attrs:{title:"Byte expansion"}},[t("tab-byte-expansion",{ref:"tabByteExpansion"})],1)],1)],1)],1)},n=[],l=function(){var e=this,t=e._self._c;return t("div",[t("b-row",{attrs:{"no-gutters":"","align-h":"center","align-v":"start"}},[t("b-col",{attrs:{sm:"12",md:"7",lg:"5",xl:"4","align-self":"center"}},[t("input-file",{ref:"inputFile",staticClass:"top-row",attrs:{errorMessage:this.errorMessage,placeholderText:"Choose a file to convert",leaveRoomForHelpIcon:!0},on:{load:function(t){return e.readDataToResize(t)}}})],1)],1),t("b-row",{attrs:{"no-gutters":"","align-h":"center","align-v":"start"}},[t("b-col",{attrs:{sm:"12",md:"7",lg:"5",xl:"4","align-self":"center"}},[t("file-size",{attrs:{display:null!==this.saveData,fileData:this.saveData}})],1)],1),t("b-row",{attrs:{"no-gutters":"","align-h":"center","align-v":"start"}},[t("b-col",{attrs:{sm:"12",md:"7",lg:"5",xl:"4","align-self":"center"}},[t("output-filesize",{ref:"outputFilesize",attrs:{platform:"all"},model:{value:e.newSize,callback:function(t){e.newSize=t},expression:"newSize"}})],1)],1),t("b-row",{attrs:{"no-gutters":"","align-h":"center","align-v":"start"}},[t("b-col",{attrs:{sm:"12",md:"7",lg:"5",xl:"4","align-self":"center"}},[t("pad-fill-byte",{attrs:{id:"pad-fill-byte",disabled:!this.isIncreasingFileSize()},model:{value:e.padFillByte,callback:function(t){e.padFillByte=t},expression:"padFillByte"}})],1)],1),t("b-row",{staticClass:"justify-content-md-center",attrs:{"align-h":"center"}},[t("b-col",{attrs:{cols:"auto",sm:"4",md:"3",lg:"2","align-self":"center"}},[t("b-button",{staticClass:"utilities-advanced-resize-convert-button",attrs:{variant:"success",block:"",disabled:!this.canResizeFile()||!this.outputFilename},on:{click:function(t){return e.resizeFile()}}},[e._v(" Convert! ")])],1)],1)],1)},o=[],c=s(3162),h=s(5796),u=s(1203),d=function(){var e=this,t=e._self._c;return t("div",[t("b-row",{attrs:{"no-gutters":"","align-h":"start","align-v":"center"}},[t("b-col",{attrs:{cols:"11",sm:"12"}},[t("div",[t("b-form-select",{attrs:{value:e.value,options:e.options,disabled:e.disabled},on:{input:function(t){return e.$emit("input",t)}}}),t("help-button",{staticClass:"help-button",attrs:{"popover-text":"The value to fill into the extra bytes when increasing the size of the file. Not needed if decreasing the size of the file. If unsure choose 0x00",id:this.id}})],1)])],1)],1)},p=[],f=s(2893),m={name:"PadFillByte",props:{value:{type:Number,default:null},id:String,disabled:{type:Boolean,default:!1}},components:{HelpButton:f.Z},data(){return{options:[{value:0,text:"Fill with 0x00"},{value:255,text:"Fill with 0xFF"}]}}},b=m,g=s(1001),v=(0,g.Z)(b,d,p,!1,null,"7597d4f8",null),y=v.exports,w=function(){var e=this,t=e._self._c;return t("b-collapse",{attrs:{appear:"",id:"id",visible:e.display}},[t("b-list-group",[t("b-list-group-item",{staticClass:"d-flex justify-content-between align-items-center",attrs:{variant:this.variant}},[t("div",[e._v("File size:")]),t("div",[e._v(e._s(e.fileSize)+" bytes")])])],1)],1)},x=[],F={name:"FileSize",props:{fileData:null,variant:null,id:null,display:{type:Boolean,default:!1}},computed:{fileSize(){return this.fileData?this.fileData.byteLength:0}}},S=F,D=(0,g.Z)(S,w,x,!1,null,"04d77f5c",null),z=D.exports,C=s(146),E=s(8390);const _=0;var Z={name:"TabResize",components:{OutputFilesize:h.Z,InputFile:u.Z,PadFillByte:y,FileSize:z},data(){return{saveData:null,errorMessage:null,outputFilename:null,newSize:null,padFillByte:_}},methods:{reset(){this.saveData=null,this.errorMessage=null,this.outputFilename=null,this.newSize=null,this.padFillByte=_,this.$refs.inputFile.reset()},readDataToResize(e){this.errorMessage=null,this.outputFilename=null;try{this.saveData=e.arrayBuffer,this.outputFilename=`${C.Z.removeFilenameExtension(e.filename)} (converted)${C.Z.getExtension(e.filename)}`,this.checkResizeFile()}catch(t){this.errorMessage=t.message}},isIncreasingFileSize(){return null!==this.saveData&&null!==this.newSize&&this.newSize>this.saveData.byteLength},checkResizeFile(){this.saveData},canResizeFile(){if(null!==this.saveData&&null!==this.newSize)try{return this.checkResizeFile(),!0}catch(e){return!1}return!1},resizeFile(){const e=E.Z.resizeRawSave(this.saveData,this.newSize,this.padFillByte),t=new Blob([e],{type:"application/octet-stream"});(0,c.saveAs)(t,this.outputFilename)}}},B=Z,T=(0,g.Z)(B,l,o,!1,null,"8b3a2f2e",null),k=T.exports,L=function(){var e=this,t=e._self._c;return t("div",[t("b-row",{attrs:{"no-gutters":"","align-h":"center","align-v":"start"}},[t("b-col",{attrs:{sm:"12",md:"7",lg:"5",xl:"4","align-self":"center"}},[t("endianness-word-size",{staticClass:"top-row",attrs:{id:"endianness-word-size"},on:{input:function(t){return e.changeEndianWordSize(t)}},model:{value:e.endianWordSize,callback:function(t){e.endianWordSize=t},expression:"endianWordSize"}})],1)],1),t("b-row",{attrs:{"no-gutters":"","align-h":"center","align-v":"start"}},[t("b-col",{attrs:{sm:"12",md:"7",lg:"5",xl:"4","align-self":"center"}},[t("input-file",{ref:"inputFile",attrs:{errorMessage:this.errorMessage,placeholderText:"Choose a file to convert",leaveRoomForHelpIcon:!0},on:{load:function(t){return e.readDataToEndianSwap(t)}}})],1)],1),t("b-row",{staticClass:"justify-content-md-center",attrs:{"align-h":"center"}},[t("b-col",{attrs:{cols:"auto",sm:"4",md:"3",lg:"2","align-self":"center"}},[t("b-button",{staticClass:"utilities-advanced-endian-swap-convert-button",attrs:{variant:"success",block:"",disabled:!this.canEndianSwap()||!this.outputFilename},on:{click:function(t){return e.endianSwapData()}}},[e._v(" Convert! ")])],1)],1)],1)},$=[],A=function(){var e=this,t=e._self._c;return t("div",[t("b-row",{attrs:{"no-gutters":"","align-h":"start","align-v":"center"}},[t("b-col",{attrs:{cols:"11",sm:"12"}},[t("div",[t("b-form-select",{attrs:{value:e.value,options:e.options,disabled:e.disabled},on:{input:function(t){return e.$emit("input",t)}}}),t("help-button",{staticClass:"help-button",attrs:{"popover-text":"The word size is the number of bytes the machine's internal registers can process in a single instruction",id:this.id}})],1)])],1)],1)},M=[],I={name:"EndiannessWordSize",props:{value:{type:Number,default:null},id:String,disabled:{type:Boolean,default:!1}},components:{HelpButton:f.Z},data(){return{options:[{value:null,text:"Choose word size",disabled:!0},{value:2,text:"2 bytes (16 bits)"},{value:4,text:"4 bytes (32 bits) (e.g. Nintendo 64)"},{value:8,text:"8 bytes (64 bits) (e.g. open_agb_firm)"}]}}},H=I,O=(0,g.Z)(H,A,M,!1,null,"2762d3cb",null),R=O.exports,U=s(5756),W={name:"TabEndianSwap",components:{EndiannessWordSize:R,InputFile:u.Z},data(){return{saveData:null,errorMessage:null,outputFilename:null,endianWordSize:null}},methods:{reset(){this.saveData=null,this.errorMessage=null,this.outputFilename=null,this.endianWordSize=null,this.$refs.inputFile.reset()},readDataToEndianSwap(e){this.errorMessage=null,this.outputFilename=null;try{this.saveData=e.arrayBuffer,this.outputFilename=`${C.Z.removeFilenameExtension(e.filename)} (converted)${C.Z.getExtension(e.filename)}`,this.checkEndianWordSize()}catch(t){this.errorMessage=t.message}},changeEndianWordSize(){this.errorMessage=null;try{this.checkEndianWordSize()}catch(e){this.errorMessage=e.message}},checkEndianWordSize(){if(null!==this.saveData&&null!==this.endianWordSize&&this.saveData.byteLength%this.endianWordSize!==0)throw new Error(`File size must be a multiple of ${this.endianWordSize}. However, file size is ${this.saveData.byteLength} bytes.`)},canEndianSwap(){return null!==this.saveData&&null!==this.endianWordSize&&this.saveData.byteLength%this.endianWordSize===0},endianSwapData(){const e=U.Z.swap(this.saveData,this.endianWordSize),t=new Blob([e],{type:"application/octet-stream"});(0,c.saveAs)(t,this.outputFilename)}}},N=W,P=(0,g.Z)(N,L,$,!1,null,"4782a078",null),V=P.exports,j=function(){var e=this,t=e._self._c;return t("div",[t("b-row",{attrs:{"no-gutters":"","align-h":"center","align-v":"start"}},[t("b-col",{attrs:{sm:"12",md:"7",lg:"5",xl:"4","align-self":"center"}},[t("input-number",{ref:"inputNumberSliceStartOffset",staticClass:"top-row",attrs:{id:"input-slice-start-offset",labelText:"Start offset:",helpText:"A slice is copying out a portion of a larger file.\n        The start offset is the number of bytes from the beginning of the file to begin the slice. Can be in decimal, or hexadecimal beginning with 0x"},on:{input:function(t){return e.changeSliceStartOffset(t)}}})],1)],1),t("b-row",{attrs:{"no-gutters":"","align-h":"center","align-v":"start"}},[t("b-col",{attrs:{sm:"12",md:"7",lg:"5",xl:"4","align-self":"center"}},[t("input-number",{ref:"inputNumberSliceLength",attrs:{id:"input-slice-length",labelText:"Length:",helpText:"The length of data to slice, in bytes. Leave blank to slice to the end of the file. Can be in decimal, or hexadecimal beginning with 0x"},on:{input:function(t){return e.changeSliceLength(t)}}})],1)],1),t("b-row",{attrs:{"no-gutters":"","align-h":"center","align-v":"start"}},[t("b-col",{attrs:{sm:"12",md:"7",lg:"5",xl:"4","align-self":"center"}},[t("input-file",{ref:"inputFile",attrs:{errorMessage:this.errorMessage,placeholderText:"Choose a file to convert",leaveRoomForHelpIcon:!0},on:{load:function(t){return e.readDataToSlice(t)}}})],1)],1),t("b-row",{staticClass:"justify-content-md-center",attrs:{"align-h":"center"}},[t("b-col",{attrs:{cols:"auto",sm:"4",md:"3",lg:"2","align-self":"center"}},[t("b-button",{staticClass:"utilities-advanced-slice-convert-button",attrs:{variant:"success",block:"",disabled:!this.canSliceFile()||!this.outputFilename},on:{click:function(t){return e.sliceFile()}}},[e._v(" Convert! ")])],1)],1)],1)},G=[],X=function(){var e=this,t=e._self._c;return t("div",[t("b-row",{attrs:{"no-gutters":""}},[null!==this.labelText?t("b-col",{attrs:{cols:"5",sm:"4","align-self":"center"}},[t("label",{staticClass:"label",attrs:{for:this.id}},[e._v(e._s(e.labelText))])]):e._e(),t("b-col",{attrs:{cols:null!==this.labelText?6:11,sm:null!==this.labelText?8:12}},[t("div",[t("b-form-input",{attrs:{placeholder:this.placeholderText,state:this.isValid,id:this.id},on:{input:function(t){return e.checkInput(t)}},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}}),null!==this.helpText?t("help-button",{staticClass:"help-button",attrs:{"popover-text":this.helpText,id:this.id}}):e._e()],1)])],1),t("b-row",{attrs:{"no-gutters":"","align-h":"center","align-v":"center"}},[t("b-col",{attrs:{cols:"12"}},[t("b-alert",{attrs:{variant:"danger",show:null!==this.errorMessage}},[e._v(" "+e._s(this.errorMessage)+" ")])],1)],1)],1)},q=[];const Y=/^[0-9]+$/,J=/^[0-9a-f]+$/;var K={name:"InputNumber",components:{HelpButton:f.Z},props:{errorMessage:{type:String,default:null},labelText:{type:String,default:null},placeholderText:{type:String,default:null},helpText:{type:String,default:null},id:String,leaveRoomForHelpIcon:Boolean},data(){return{isValid:null,value:null}},methods:{reset(){this.value=null,this.isValid=null},checkInput(e){let t=e.trim();0===t.length?(this.isValid=null,this.$emit("input",null)):t.startsWith("0x")?(t=t.substring(2),t.match(J)?(this.isValid=null,this.$emit("input",parseInt(t,16))):(this.isValid=!1,this.$emit("input",null))):t.match(Y)?(this.isValid=null,this.$emit("input",parseInt(t,10))):(this.isValid=!1,this.$emit("input",null))}}},Q=K,ee=(0,g.Z)(Q,X,q,!1,null,"48f7c8b2",null),te=ee.exports,se={name:"TabSlice",components:{InputNumber:te,InputFile:u.Z},data(){return{saveData:null,errorMessage:null,outputFilename:null,sliceStartOffset:null,sliceLength:null}},methods:{reset(){this.saveData=null,this.errorMessage=null,this.outputFilename=null,this.sliceStartOffset=null,this.sliceLength=null,this.$refs.inputFile.reset(),this.$refs.inputNumberSliceStartOffset.reset(),this.$refs.inputNumberSliceLength.reset()},readDataToSlice(e){this.errorMessage=null,this.outputFilename=null;try{this.saveData=e.arrayBuffer,this.outputFilename=`${C.Z.removeFilenameExtension(e.filename)} (converted)${C.Z.getExtension(e.filename)}`,this.checkSliceFile()}catch(t){this.errorMessage=t.message}},changeSliceStartOffset(e){this.sliceStartOffset=e,this.changeSliceOffsetOrLength()},changeSliceLength(e){this.sliceLength=e,this.changeSliceOffsetOrLength()},changeSliceOffsetOrLength(){this.errorMessage=null;try{this.checkSliceFile()}catch(e){this.errorMessage=e.message}},checkSliceFile(){if(null!==this.saveData){if(null!==this.sliceStartOffset&&this.sliceStartOffset>this.saveData.byteLength)throw new Error(`Specified a starting offset of ${this.sliceStartOffset} bytes, but the file is only ${this.saveData.byteLength} bytes long`);if(null!==this.sliceLength&&this.sliceLength>this.saveData.byteLength)throw new Error(`Specified a length of ${this.sliceLength} bytes, but the file is only ${this.saveData.byteLength} bytes long`);if(null!==this.sliceStartOffset&&null!==this.sliceLength&&this.sliceStartOffset+this.sliceLength>this.saveData.byteLength)throw new Error(`Specified a starting offset of ${this.sliceStartOffset} and a length of ${this.sliceLength} bytes, which is a total of ${this.sliceStartOffset+this.sliceLength} bytes but the file is only ${this.saveData.byteLength} bytes long`)}},canSliceFile(){if(null!==this.saveData&&null!==this.sliceStartOffset)try{return this.checkSliceFile(),!0}catch(e){return!1}return!1},sliceFile(){let e=null;e=null===this.sliceLength?this.saveData.slice(this.sliceStartOffset):this.saveData.slice(this.sliceStartOffset,this.sliceStartOffset+this.sliceLength);const t=new Blob([e],{type:"application/octet-stream"});(0,c.saveAs)(t,this.outputFilename)}}},ae=se,re=(0,g.Z)(ae,j,G,!1,null,"3f17d8ae",null),ie=re.exports,ne=function(){var e=this,t=e._self._c;return t("div",[t("b-row",{attrs:{"no-gutters":"","align-h":"center","align-v":"start"}},[t("b-col",{attrs:{sm:"12",md:"7",lg:"5",xl:"4","align-self":"center"}},[t("input-file",{ref:"inputFile1",staticClass:"top-row",attrs:{placeholderText:"Choose first file to compare",leaveRoomForHelpIcon:!0},on:{load:function(t){return e.readData1(t)}}})],1)],1),t("b-row",{attrs:{"no-gutters":"","align-h":"center","align-v":"start"}},[t("b-col",{attrs:{sm:"12",md:"7",lg:"5",xl:"4","align-self":"center"}},[t("input-file",{ref:"inputFile2",attrs:{placeholderText:"Choose second file to compare",leaveRoomForHelpIcon:!0},on:{load:function(t){return e.readData2(t)}}})],1)],1),t("b-row",{attrs:{"no-gutters":"","align-h":"center","align-v":"start"}},[t("b-col",{attrs:{sm:"12",md:"7",lg:"5",xl:"4","align-self":"center"}},[t("b-collapse",{attrs:{appear:"",id:"id",visible:e.showComparison}},[t("b-list-group",[t("b-list-group-item",{staticClass:"d-flex justify-content-between align-items-center",attrs:{variant:this.variant}},[this.filesAreSame?t("div",[e._v(" Files contents are identical ")]):t("div",[e._v(" Files contents are different ")])])],1)],1)],1)],1),t("b-row",{staticClass:"justify-content-md-center",attrs:{"align-h":"center"}},[t("b-col",{attrs:{cols:"auto",sm:"4",md:"3",lg:"2","align-self":"center"}},[t("b-button",{staticClass:"utilities-advanced-file-compare-convert-button",attrs:{variant:"success",block:"",disabled:!e.hasAllSaveData},on:{click:function(t){return e.compareFiles()}}},[e._v(" Compare! ")])],1)],1)],1)},le=[],oe={name:"TabFileCompare",components:{InputFile:u.Z},data(){return{saveData1:null,saveData2:null,filesAreSame:!1,showComparison:!1}},computed:{hasAllSaveData(){return null!==this.saveData1&&null!==this.saveData2},variant(){return this.filesAreSame?"success":"danger"}},methods:{reset(){this.saveData1=null,this.saveData2=null,this.filesAreSame=!1,this.showComparison=!1,this.$refs.inputFile1.reset(),this.$refs.inputFile2.reset()},readData1(e){this.saveData1=e.arrayBuffer},readData2(e){this.saveData2=e.arrayBuffer},compareFiles(){this.hasAllSaveData&&(this.filesAreSame=C.Z.arrayBuffersEqual(this.saveData1,this.saveData2),this.showComparison=!0)}}},ce=oe,he=(0,g.Z)(ce,ne,le,!1,null,"ce65e74e",null),ue=he.exports,de=function(){var e=this,t=e._self._c;return t("div",[t("b-row",{attrs:{"no-gutters":"","align-h":"center","align-v":"start"}},[t("b-col",{attrs:{sm:"12",md:"7",lg:"5",xl:"4","align-self":"center"}},[t("input-file",{ref:"inputFile",staticClass:"top-row",attrs:{placeholderText:"Choose a file to convert",leaveRoomForHelpIcon:!0,"help-text":"Choose a file from which to remove a header or footer. A header is extra information at the start of a file, and a footer is extra information at the end",id:"inputFile"},on:{load:function(t){return e.readData(t)}}})],1)],1),t("b-row",{attrs:{"no-gutters":"","align-h":"center","align-v":"start"}},[t("b-col",{attrs:{sm:"12",md:"7",lg:"5",xl:"4","align-self":"center"}},[t("b-collapse",{attrs:{appear:"",id:"id",visible:null!==this.headerSize}},[t("b-list-group",[t("b-list-group-item",{staticClass:"d-flex justify-content-between align-items-center",attrs:{variant:0===this.headerSize?"danger":"success"}},[0!==this.headerSize?t("div",[e._v(" Found a "+e._s(e.headerSize)+" byte potential header or footer ")]):t("div",[e._v(" No header or footer found ")])])],1)],1)],1)],1),t("b-row",{attrs:{"no-gutters":"","align-h":"center","align-v":"start"}},[t("b-col",{attrs:{sm:"12",md:"7",lg:"5",xl:"4","align-self":"center"}},[t("header-footer",{attrs:{"first-word":"Remove",id:"headerFooterRemove"},model:{value:e.headerFooter,callback:function(t){e.headerFooter=t},expression:"headerFooter"}})],1)],1),t("b-row",{staticClass:"justify-content-md-center",attrs:{"align-h":"center"}},[t("b-col",{attrs:{cols:"auto",sm:"4",md:"3",lg:"2","align-self":"center"}},[t("b-button",{staticClass:"utilities-advanced-remove-header-footer-convert-button",attrs:{variant:"success",block:"",disabled:null===this.headerSize||0===this.headerSize},on:{click:function(t){return e.removeHeaderFooter()}}},[e._v(" Convert! ")])],1)],1)],1)},pe=[],fe=function(){var e=this,t=e._self._c;return t("div",[t("b-row",{attrs:{"no-gutters":"","align-h":"start","align-v":"center"}},[t("b-col",{attrs:{cols:"11",sm:"12"}},[t("div",[t("b-form-select",{attrs:{value:e.value,options:e.options,disabled:e.disabled},on:{input:function(t){return e.$emit("input",t)}}}),t("help-button",{staticClass:"help-button",attrs:{"popover-text":`Choose whether to ${this.firstWord.toLowerCase()} the header or footer`,id:this.id}})],1)])],1)],1)},me=[],be={name:"HeaderFooter",props:{value:{type:String,default:null},firstWord:{type:String,default:null},id:String,disabled:{type:Boolean,default:!1}},components:{HelpButton:f.Z},data(){return{options:[{value:"header",text:`${this.firstWord} header`},{value:"footer",text:`${this.firstWord} footer`}]}}},ge=be,ve=(0,g.Z)(ge,fe,me,!1,null,"d56f22a4",null),ye=ve.exports,we=s(7761),xe=s(1897),Fe={name:"TabRemoveHeaderFooter",components:{InputFile:u.Z,HeaderFooter:ye},data(){return{saveData:null,headerSize:null,headerFooter:"header",outputFilename:null}},methods:{reset(){this.saveData=null,this.headerSize=null,this.headerFooter="header",this.outputFilename=null,this.$refs.inputFile.reset()},readData(e){this.saveData=e.arrayBuffer,this.outputFilename=`${C.Z.removeFilenameExtension(e.filename)} (converted)${C.Z.getExtension(e.filename)}`,this.headerSize=Math.max(this.saveData.byteLength-we.Z.getNextSmallestPowerOf2(this.saveData.byteLength),0)},removeHeaderFooter(){const e="header"===this.headerFooter?xe.Z.removePaddingFromStart(this.saveData,this.headerSize):xe.Z.removePaddingFromEnd(this.saveData,this.headerSize),t=new Blob([e],{type:"application/octet-stream"});(0,c.saveAs)(t,this.outputFilename)}}},Se=Fe,De=(0,g.Z)(Se,de,pe,!1,null,"56c7b5ee",null),ze=De.exports,Ce=function(){var e=this,t=e._self._c;return t("div",[t("b-row",{attrs:{"no-gutters":"","align-h":"center","align-v":"start"}},[t("b-col",{attrs:{sm:"12",md:"7",lg:"5",xl:"4","align-self":"center"}},[t("input-file",{ref:"inputFileExample",staticClass:"top-row",attrs:{placeholderText:"Choose an example file",leaveRoomForHelpIcon:!0,"help-text":"Choose an example file from which to copy a header or footer. A header is extra information at the start of a file, and a footer is extra information at the end",id:"inputFileExample"},on:{load:function(t){return e.readExampleData(t)}}})],1)],1),t("b-row",{attrs:{"no-gutters":"","align-h":"center","align-v":"start"}},[t("b-col",{attrs:{sm:"12",md:"7",lg:"5",xl:"4","align-self":"center"}},[t("b-collapse",{attrs:{appear:"",id:"id",visible:null!==this.headerSize}},[t("b-list-group",[t("b-list-group-item",{staticClass:"d-flex justify-content-between align-items-center",attrs:{variant:0===this.headerSize?"danger":"success"}},[0!==this.headerSize?t("div",[e._v(" Found a "+e._s(e.headerSize)+" byte potential header or footer ")]):t("div",[e._v(" No header or footer found ")])])],1)],1)],1)],1),t("b-row",{attrs:{"no-gutters":"","align-h":"center","align-v":"start"}},[t("b-col",{attrs:{sm:"12",md:"7",lg:"5",xl:"4","align-self":"center"}},[t("header-footer",{attrs:{"first-word":"Copy",id:"headerFooterAdd"},model:{value:e.headerFooter,callback:function(t){e.headerFooter=t},expression:"headerFooter"}})],1)],1),t("b-row",{attrs:{"no-gutters":"","align-h":"center","align-v":"start"}},[t("b-col",{attrs:{sm:"12",md:"7",lg:"5",xl:"4","align-self":"center"}},[t("input-file",{ref:"inputFileDestination",attrs:{placeholderText:"Choose a file to convert","help-text":"Choose a file to which to add the header or footer from the example file above",leaveRoomForHelpIcon:!0,id:"inputFileDestination"},on:{load:function(t){return e.readDestinationData(t)}}})],1)],1),t("b-row",{staticClass:"justify-content-md-center",attrs:{"align-h":"center"}},[t("b-col",{attrs:{cols:"auto",sm:"4",md:"3",lg:"2","align-self":"center"}},[t("b-button",{staticClass:"utilities-advanced-add-header-footer-convert-button",attrs:{variant:"success",block:"",disabled:null===this.headerSize||0===this.headerSize||null===this.destinationSaveData},on:{click:function(t){return e.removeHeaderFooter()}}},[e._v(" Convert! ")])],1)],1)],1)},Ee=[],_e={name:"TabAddHeaderFooter",components:{InputFile:u.Z,HeaderFooter:ye},data(){return{exampleSaveData:null,destinationSaveData:null,headerSize:null,headerFooter:"header",outputFilename:null}},methods:{reset(){this.exampleSaveData=null,this.destinationSaveData=null,this.headerSize=null,this.headerFooter="header",this.outputFilename=null,this.$refs.inputFileExample.reset(),this.$refs.inputFileDestination.reset()},readExampleData(e){this.exampleSaveData=e.arrayBuffer,this.headerSize=Math.max(this.exampleSaveData.byteLength-we.Z.getNextSmallestPowerOf2(this.exampleSaveData.byteLength),0)},readDestinationData(e){this.destinationSaveData=e.arrayBuffer,this.outputFilename=`${C.Z.removeFilenameExtension(e.filename)} (converted)${C.Z.getExtension(e.filename)}`},removeHeaderFooter(){const e="header"===this.headerFooter?C.Z.copyHeaderFromArrayBuffer(this.exampleSaveData,this.headerSize,this.destinationSaveData):C.Z.copyFooterFromArrayBuffer(this.exampleSaveData,this.headerSize,this.destinationSaveData),t=new Blob([e],{type:"application/octet-stream"});(0,c.saveAs)(t,this.outputFilename)}}},Ze=_e,Be=(0,g.Z)(Ze,Ce,Ee,!1,null,"32b0ced4",null),Te=Be.exports,ke=function(){var e=this,t=e._self._c;return t("div",[t("b-row",{attrs:{"no-gutters":"","align-h":"center","align-v":"start"}},[t("b-col",{attrs:{sm:"12",md:"7",lg:"5",xl:"4","align-self":"center"}},[t("compression-type",{staticClass:"top-row",attrs:{id:"compression-type"},model:{value:e.compressionType,callback:function(t){e.compressionType=t},expression:"compressionType"}})],1)],1),t("b-row",{attrs:{"no-gutters":"","align-h":"center","align-v":"start"}},[t("b-col",{attrs:{sm:"12",md:"7",lg:"5",xl:"4","align-self":"center"}},[t("compression-decompression",{attrs:{id:"compression-decompression"},model:{value:e.compressionDecompression,callback:function(t){e.compressionDecompression=t},expression:"compressionDecompression"}})],1)],1),t("b-row",{attrs:{"no-gutters":"","align-h":"center","align-v":"start"}},[t("b-col",{attrs:{sm:"12",md:"7",lg:"5",xl:"4","align-self":"center"}},[t("input-file",{ref:"inputFile",attrs:{errorMessage:this.errorMessage,placeholderText:"Choose a file to convert",leaveRoomForHelpIcon:!0},on:{load:function(t){return e.readDataToCompressDecompress(t)}}})],1)],1),t("b-row",{staticClass:"justify-content-md-center",attrs:{"align-h":"center"}},[t("b-col",{attrs:{cols:"auto",sm:"4",md:"3",lg:"2","align-self":"center"}},[t("b-button",{staticClass:"utilities-advanced-compression-convert-button",attrs:{variant:"success",block:"",disabled:!this.canCompressDecompress()||!this.outputFilename},on:{click:function(t){return e.compressDecompressFile()}}},[e._v(" Convert! ")])],1)],1)],1)},Le=[],$e=function(){var e=this,t=e._self._c;return t("div",[t("b-row",{attrs:{"no-gutters":"","align-h":"start","align-v":"center"}},[t("b-col",{attrs:{cols:"11",sm:"12"}},[t("div",[t("b-form-select",{attrs:{value:e.value,options:e.options,disabled:e.disabled},on:{input:function(t){return e.$emit("input",t)}}}),t("help-button",{staticClass:"help-button",attrs:{"popover-text":"The algorithm to use to compress or decompress the save file",id:this.id}})],1)])],1)],1)},Ae=[],Me={name:"CompressionType",props:{value:{type:String,default:null},id:String,disabled:{type:Boolean,default:!1}},components:{HelpButton:f.Z},data(){return{options:[{value:"zlib",text:"zlib algorithm"},{value:"gzip",text:"gzip algorithm"},{value:"rzip",text:"rzip algorithm"},{value:"lzo",text:"LZO algorithm"}]}}},Ie=Me,He=(0,g.Z)(Ie,$e,Ae,!1,null,"29ce61e5",null),Oe=He.exports,Re=function(){var e=this,t=e._self._c;return t("div",[t("b-row",{attrs:{"no-gutters":"","align-h":"start","align-v":"center"}},[t("b-col",{attrs:{cols:"11",sm:"12"}},[t("div",[t("b-form-select",{attrs:{value:e.value,options:e.options,disabled:e.disabled},on:{input:function(t){return e.$emit("input",t)}}}),t("help-button",{staticClass:"help-button",attrs:{"popover-text":"Whether to decompress or compress the save file",id:this.id}})],1)])],1)],1)},Ue=[],We={name:"CompressionDecompression",props:{value:{type:String,default:null},id:String,disabled:{type:Boolean,default:!1}},components:{HelpButton:f.Z},data(){return{options:[{value:"decompress",text:"Decompress file"},{value:"compress",text:"Compress file"}]}}},Ne=We,Pe=(0,g.Z)(Ne,Re,Ue,!1,null,"58f46c8a",null),Ve=Pe.exports,je=s(8540),Ge=s(4089),Xe=(s(3767),s(8585),s(8696),s(7885));const qe=1,Ye=6,Je=131072,Ke=20,Qe=4,et=Uint8Array.from([35,82,90,73,80,118,qe,35]);class tt{constructor(e,t,s){this.chunk_size=t,this.inflated_size=BigInt(e),this.is_rzip_compressed=s}}class st{constructor(e){this.pako=Xe.ZP,this.rfile=e,this.header=this.read_header()}read_header(){const e=this.rfile.slice(0,Ke);if(this.rfile.length<Ke||!at(e.slice(0,et.length),et))return new tt(this.rfile.length,Je,!1);const t=new DataView(e.buffer).getUint32(et.length,!0);if(t<=0)throw new Error("Invalid RZIP chunk size");const s=new DataView(e.buffer).getBigUint64(et.length+4,!0);if(s<=0n)throw new Error("Invalid RZIP inflated size");return new tt(s,t,!0)}is_rzip_compressed(){return this.header.is_rzip_compressed}rzip_inflate(){if(!this.is_rzip_compressed())return this.rfile;if(this.header.inflated_size>BigInt(Number.MAX_SAFE_INTEGER))throw new Error("Inflated size exceeds MAX_SAFE_INTEGER");let e=new Uint8Array(Number(this.header.inflated_size)),t=0,s=Ke;while(BigInt(t)<this.header.inflated_size){if(s+Qe>this.rfile.length)throw new Error("Unexpected end of RZIP file while reading chunk header");const a=this.rfile.slice(s,s+Qe);s+=Qe;const r=new DataView(a.buffer).getUint32(0,!0);if(s+r>this.rfile.length)throw new Error("Unexpected end of RZIP file while reading chunk data");const i=this.rfile.slice(s,s+r);s+=r;const n=this.pako.inflate(i);e.set(n,t),t+=n.length}if(BigInt(e.length)!==this.header.inflated_size)throw new Error("Decompressed size does not match expected inflated size");return this.rfile=e,this.header.is_rzip_compressed=!1,e}rzip_deflate(){if(this.is_rzip_compressed())return this.rfile;let e=new Uint8Array(this.rfile.length);const t=new Uint8Array(Ke);t.set(et,0);const s=new DataView(new ArrayBuffer(4));s.setUint32(0,Je,!0);const a=new DataView(new ArrayBuffer(8));a.setBigUint64(0,this.header.inflated_size,!0),t.set(new Uint8Array(s.buffer),et.length),t.set(new Uint8Array(a.buffer),et.length+4),e.set(t,0);let r=0,i=Ke;while(r<this.rfile.length){const t=this.rfile.slice(r,Math.min(r+Je,this.rfile.length));r+=t.length;const s=this.pako.deflate(t,{level:Ye}),a=new Uint8Array(Qe),n=new DataView(new ArrayBuffer(4));n.setUint32(0,s.length,!0),a.set(new Uint8Array(n.buffer),0);const l=Qe+s.length;if(i+l>e.length){const t=new Uint8Array(this.rfile.length-i+2*l);t.set(e,0),e=t}e.set(a,i),i+=Qe,e.set(s,i),i+=s.length}return e=e.slice(0,i),this.rfile=e,this.header.is_rzip_compressed=!0,this.rfile}}function at(e,t){if(e.length!==t.length)return!1;for(let s=0;s<e.length;s++)if(e[s]!==t[s])return!1;return!0}class rt{static decompress(e){try{const t=new st(new Uint8Array(e));if(!t.is_rzip_compressed())throw new Error("Data is not compressed with rzip");return C.Z.bufferToArrayBuffer(t.rzip_inflate())}catch(t){throw new Error("Could not decompress the data using rzip",t)}}static compress(e){try{const t=new st(new Uint8Array(e));if(t.is_rzip_compressed())throw new Error("Data is already compressed using rzip");return C.Z.bufferToArrayBuffer(t.rzip_deflate())}catch(t){throw new Error("Could not compress the data using rzip",t)}}}var it=s(4491);const nt="zlib",lt="decompress";var ot={name:"TabCompression",components:{CompressionType:Oe,CompressionDecompression:Ve,InputFile:u.Z},data(){return{saveData:null,errorMessage:null,outputFilename:null,compressionType:nt,compressionDecompression:lt}},watch:{compressionType(){this.errorMessage=null;try{this.checkCompressDecompress()}catch(e){this.errorMessage=e.message}},compressionDecompression(){this.errorMessage=null;try{this.checkCompressDecompress()}catch(e){this.errorMessage=e.message}}},methods:{reset(){this.saveData=null,this.errorMessage=null,this.outputFilename=null,this.compressionType=nt,this.compressionDecompression=lt,this.$refs.inputFile.reset()},readDataToCompressDecompress(e){this.errorMessage=null,this.outputFilename=null;try{this.saveData=e.arrayBuffer,this.outputFilename=`${C.Z.removeFilenameExtension(e.filename)} (converted)${C.Z.getExtension(e.filename)}`,this.checkCompressDecompress()}catch(t){this.errorMessage=t.message}},getCompressedDecompressedData(){if(null!==this.saveData)switch(this.compressionDecompression){case"compress":switch(this.compressionType){case"zlib":try{return je.Z.compress(this.saveData)}catch(e){throw new Error("Unable to compress the specified data using zlib compression")}case"gzip":try{return Ge.Z.compress(this.saveData)}catch(e){throw new Error("Unable to compress the specified data using gzip compression")}case"rzip":try{return rt.compress(this.saveData)}catch(e){throw new Error("Unable to compress the specified data using rzip compression")}case"lzo":try{return it.Z.compress(this.saveData)}catch(e){throw new Error("Unable to compress the specified data using LZO compression")}default:throw new Error("Unknown compression type")}case"decompress":switch(this.compressionType){case"zlib":try{return je.Z.decompress(this.saveData)}catch(e){throw new Error("Unable to decompress the specified data using zlib compression")}case"gzip":try{return Ge.Z.decompress(this.saveData)}catch(e){throw new Error("Unable to decompress the specified data using gzip compression")}case"rzip":try{return rt.decompress(this.saveData)}catch(e){throw new Error("Unable to decompress the specified data using rzip compression")}case"lzo":try{return it.Z.decompress(this.saveData)}catch(e){throw new Error("Unable to decompress the specified data using LZO compression")}default:throw new Error("Unknown compression type")}default:throw new Error("Unknown compression/decompression selection")}throw new Error("No save data specified")},checkCompressDecompress(){null!==this.saveData&&this.getCompressedDecompressedData()},canCompressDecompress(){try{return this.checkCompressDecompress(),!0}catch(e){return!1}},compressDecompressFile(){const e=this.getCompressedDecompressedData(),t=new Blob([e],{type:"application/octet-stream"});(0,c.saveAs)(t,this.outputFilename)}}},ct=ot,ht=(0,g.Z)(ct,ke,Le,!1,null,"1422731a",null),ut=ht.exports,dt=function(){var e=this,t=e._self._c;return t("div",[t("b-row",{attrs:{"no-gutters":"","align-h":"center","align-v":"start"}},[t("b-col",{attrs:{sm:"12",md:"7",lg:"5",xl:"4","align-self":"center"}},[t("byte-expand-contract",{staticClass:"top-row",attrs:{id:"byte-expand-contract"},on:{input:function(t){return e.changeByteExpandContract(t)}},model:{value:e.byteExpandContractSelection,callback:function(t){e.byteExpandContractSelection=t},expression:"byteExpandContractSelection"}})],1)],1),t("b-row",{attrs:{"no-gutters":"","align-h":"center","align-v":"start"}},[t("b-col",{attrs:{sm:"12",md:"7",lg:"5",xl:"4","align-self":"center"}},[t("input-file",{ref:"inputFile",attrs:{errorMessage:this.errorMessage,placeholderText:"Choose a file to convert",leaveRoomForHelpIcon:!0},on:{load:function(t){return e.readDataToByteExpandContract(t)}}})],1)],1),t("b-row",{staticClass:"justify-content-md-center",attrs:{"align-h":"center"}},[t("b-col",{attrs:{cols:"auto",sm:"4",md:"3",lg:"2","align-self":"center"}},[t("b-button",{staticClass:"utilities-advanced-byte-expand-convert-button",attrs:{variant:"success",block:"",disabled:!this.canByteExpandContract()||!this.outputFilename},on:{click:function(t){return e.byteExpandContract()}}},[e._v(" Convert! ")])],1)],1)],1)},pt=[],ft=function(){var e=this,t=e._self._c;return t("div",[t("b-row",{attrs:{"no-gutters":"","align-h":"start","align-v":"center"}},[t("b-col",{attrs:{cols:"11",sm:"12"}},[t("div",[t("b-form-select",{attrs:{value:e.value,options:e.options,disabled:e.disabled},on:{input:function(t){return e.$emit("input",t)}}}),t("help-button",{staticClass:"help-button",attrs:{"popover-text":"Different emulators, cores, flash carts, and cart readers store Sega Genesis/Mega Drive save files in different ways.\n          Some store each 8-bit byte as a 16-bit word with 0x00 as the high byte, some use 0xFF as the high byte,\n          some duplicate each byte into a 16-bit word, and some store the individual bytes as-is with no expansion.",id:this.id}})],1)])],1)],1)},mt=[],bt={name:"ByteExpandContract",props:{value:{type:String,default:null},id:String,disabled:{type:Boolean,default:!1}},components:{HelpButton:f.Z},data(){return{options:[{value:null,text:"Choose byte expansion style or contraction",disabled:!0},{value:"byte-expand-00",text:'Byte expansion with 0x00 ("HELLO" -> " H E L L O")'},{value:"byte-expand-ff",text:'Byte expansion with 0xFF ("HELLO" -> " H E L L O")'},{value:"byte-expand-duplicate",text:'Byte expansion with duplication ("HELLO" -> "HHEELLLLOO")'},{value:"byte-contract",text:'Byte contraction (" H E L L O"/"HHEELLLLOO" -> "HELLO")'}]}}},gt=bt,vt=(0,g.Z)(gt,ft,mt,!1,null,"1be78048",null),yt=vt.exports,wt=s(9522),xt={name:"TabByteExpansion",components:{ByteExpandContract:yt,InputFile:u.Z},data(){return{saveData:null,errorMessage:null,outputFilename:null,byteExpandContractSelection:null}},methods:{reset(){this.saveData=null,this.errorMessage=null,this.outputFilename=null,this.byteExpandContractSelection=null,this.$refs.inputFile.reset()},readDataToByteExpandContract(e){this.errorMessage=null,this.outputFilename=null;try{this.saveData=e.arrayBuffer,this.outputFilename=`${C.Z.removeFilenameExtension(e.filename)} (converted)${C.Z.getExtension(e.filename)}`,this.checkByteExpandContract()}catch(t){this.errorMessage=t.message}},changeByteExpandContract(){this.errorMessage=null;try{this.checkByteExpandContract()}catch(e){this.errorMessage=e.message}},byteExpandSelected(){return null!==this.byteExpandContractSelection&&this.byteExpandContractSelection.startsWith("byte-expand")},byteContractSelected(){return null!==this.byteExpandContractSelection&&this.byteExpandContractSelection.startsWith("byte-contract")},checkByteExpandContract(){if(null!==this.saveData){if(this.byteExpandSelected()&&wt.Z.isByteExpanded(this.saveData)&&!wt.Z.isEmpty(this.saveData))throw new Error("File is already byte expanded");if(this.byteContractSelected()&&!wt.Z.isByteExpanded(this.saveData))throw new Error("File is already byte contracted")}},canByteExpandContract(){if(null!==this.saveData&&null!==this.byteExpandContract)try{return this.checkByteExpandContract(),!0}catch(e){return!1}return!1},byteExpandContract(){let e=null;switch(this.byteExpandContractSelection){case"byte-expand-00":e=wt.Z.byteExpand(this.saveData,0);break;case"byte-expand-ff":e=wt.Z.byteExpand(this.saveData,255);break;case"byte-expand-duplicate":e=wt.Z.byteExpand(this.saveData,wt.Z.FILL_BYTE_REPEAT);break;case"byte-contract":e=wt.Z.byteCollapse(this.saveData);break;default:return void(this.errorMessage="Unknown byte expand/contract option selected")}const t=new Blob([e],{type:"application/octet-stream"});(0,c.saveAs)(t,this.outputFilename)}}},Ft=xt,St=(0,g.Z)(Ft,dt,pt,!1,null,"5bae05a8",null),Dt=St.exports,zt={name:"AdvancedUtils",components:{TabResize:k,TabEndianSwap:V,TabSlice:ie,TabFileCompare:ue,TabRemoveHeaderFooter:ze,TabAddHeaderFooter:Te,TabCompression:ut,TabByteExpansion:Dt},props:{initialTab:{type:String,default:"resize"}},data(){return{tabIndex:0}},beforeMount(){const e=["resize","endian-swap","slice","file-compare","remove-header-footer","add-header-footer","compression","byte-expansion"],t=e.indexOf(this.initialTab);this.tabIndex=t>=0?t:0},watch:{tabIndex(){this.$refs.tabResize.reset(),this.$refs.tabEndianSwap.reset(),this.$refs.tabSlice.reset(),this.$refs.tabFileCompare.reset(),this.$refs.tabRemoveHeaderFooter.reset(),this.$refs.tabAddHeaderFooter.reset(),this.$refs.tabCompression.reset(),this.$refs.tabByteExpansion.reset()}}},Ct=zt,Et=(0,g.Z)(Ct,i,n,!1,null,"fb034276",null),_t=Et.exports,Zt={name:"AdvancedView",components:{AdvancedUtils:_t},props:{initialTab:{type:String,default:"resize"}}},Bt=Zt,Tt=(0,g.Z)(Bt,a,r,!1,null,null,null),kt=Tt.exports},4089:function(e,t,s){s.d(t,{Z:function(){return i}});var a=s(7885),r=s(146);class i{static decompress(e){try{return r.Z.bufferToArrayBuffer(a.ZP.ungzip(e))}catch(t){throw new Error(`Could not decompress the data using gzip: ${t}`)}}static compress(e){try{return r.Z.bufferToArrayBuffer(a.ZP.gzip(e))}catch(t){throw new Error(`Could not compress the data using gzip: ${t}`)}}}},8540:function(e,t,s){s.d(t,{Z:function(){return r}});var a=s(7885);class r{static decompress(e){try{return a.ZP.inflate(e)}catch(t){throw new Error(`Could not decompress the data using zlib: ${t}`)}}static compress(e){try{return a.ZP.deflate(e)}catch(t){throw new Error(`Could not compress the data using zlib: ${t}`)}}}}}]);