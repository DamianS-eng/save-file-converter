"use strict";(self["webpackChunksave_file_converter"]=self["webpackChunksave_file_converter"]||[]).push([[652],{2919:function(e,a,t){t.r(a),t.d(a,{default:function(){return w}});var l=function(){var e=this,a=e._self._c;return a("div",{staticClass:"home"},[a("ConvertN64Mempack")],1)},n=[],i=function(){var e=this,a=e._self._c;return a("div",[a("b-container",[a("b-row",{attrs:{"no-gutters":"","align-h":"center","align-v":"start"}},[a("b-col",{attrs:{sm:"12",md:"5","align-self":"start"}},[a("b-row",{attrs:{"no-gutters":"","align-h":"center","align-v":"start"}},[a("b-col",{attrs:{cols:"12"}},[a("b-jumbotron",{class:"md"===e.$mq?"fix-jumbotron":"",attrs:{fluid:"","header-level":e._f("mq")(e.$mq,{xs:5,sm:5,md:5,lg:5,xl:4})},scopedSlots:e._u([{key:"header",fn:function(){return[e._v("Controller Pak")]},proxy:!0}])})],1)],1),"convertToRaw"===this.conversionDirection?a("div",[a("input-file",{attrs:{errorMessage:this.errorMessage,placeholderText:"Choose a file to convert (*.mpk)",acceptExtension:".mpk",leaveRoomForHelpIcon:!1},on:{load:function(a){return e.readMempackSaveData(a)}}}),a("file-list",{attrs:{display:null!==this.mempackSaveData,files:this.getFileListNames()},on:{change:function(a){return e.changeSelectedSaveData(a)}},model:{value:e.selectedSaveData,callback:function(a){e.selectedSaveData=a},expression:"selectedSaveData"}})],1):a("div",[a("output-filename",{attrs:{leaveRoomForHelpIcon:!1},model:{value:e.outputFilename,callback:function(a){e.outputFilename=a},expression:"outputFilename"}})],1)],1),a("b-col",{attrs:{sm:"12",md:"2",lg:"2",xl:"2","align-self":"start"}},[a("conversion-direction",{attrs:{horizontalLayout:["md","lg","xl"],verticalLayout:["xs","sm"],conversionDirection:this.conversionDirection},on:{change:function(a){return e.changeConversionDirection(a)}}})],1),a("b-col",{attrs:{sm:"12",md:"5","align-self":"start"}},[a("b-row",{attrs:{"no-gutters":"","align-h":"center","align-v":"start"}},[a("b-col",{attrs:{cols:"12"}},[a("b-jumbotron",{class:"md"===e.$mq?"fix-jumbotron":"",attrs:{fluid:"","header-level":e._f("mq")(e.$mq,{xs:5,sm:5,md:5,lg:5,xl:4})},scopedSlots:e._u([{key:"header",fn:function(){return[e._v("Individual saves")]},proxy:!0}])})],1)],1),"convertToRaw"===this.conversionDirection?a("div",[this.userAllowedToChangeFilename?a("div",[a("output-filename",{model:{value:e.outputFilename,callback:function(a){e.outputFilename=a},expression:"outputFilename"}})],1):a("div",[a("output-filename",{attrs:{leaveRoomForHelpIcon:!0,disabled:!0,helpText:"The filename for an individual save contains important information that the game needs to find this save data. Please do not modify it after downloading the save."},model:{value:e.outputFilename,callback:function(a){e.outputFilename=a},expression:"outputFilename"}})],1)]):a("div",[a("input-file",{attrs:{errorMessage:this.errorMessage,placeholderText:"Choose files to add",leaveRoomForHelpIcon:!1,allowMultipleFiles:!0},on:{load:function(a){return e.readEmulatorSaveData(a)}}}),a("file-list",{attrs:{display:null!==this.mempackSaveData,files:this.getFileListNames(),enabled:!1}})],1)],1)],1),a("b-row",{staticClass:"justify-content-md-center",attrs:{"align-h":"center"}},[a("b-col",{attrs:{cols:"auto",sm:"4",md:"3",lg:"2","align-self":"center"}},[a("b-button",{staticClass:"n64-mempack-convert-button",attrs:{variant:"success",block:"",disabled:this.convertButtonDisabled},on:{click:function(a){return e.convertFile()}}},[e._v(" Convert! ")])],1)],1),a("b-row",[a("b-col",[a("div",{staticClass:"help"},[e._v(" Help: how can I "),a("router-link",{attrs:{to:"/original-hardware?sort=n64"}},[e._v("copy save files to and from an N64 cartridge or Controller Pak")]),e._v("? ")],1)])],1)],1)],1)},s=[],o=t(3162),r=t(146),c=t(1203),m=t(3220),u=t(1758),v=t(4507),p=t(9394),h=t(848),d=t(5140),g={name:"ConvertN64Mempack",data(){return{mempackSaveData:null,errorMessage:null,inputFilename:null,outputFilename:null,conversionDirection:"convertToRaw",selectedSaveData:null}},components:{ConversionDirection:u.Z,InputFile:c.Z,OutputFilename:m.Z,FileList:v.Z},computed:{convertButtonDisabled(){const e="convertToRaw"===this.conversionDirection||null===this.selectedSaveData;return!this.mempackSaveData||0===this.mempackSaveData.getSaveFiles().length||!e||!this.outputFilename},userAllowedToChangeFilename(){return!this.mempackSaveData||this.mempackSaveData.getSaveFiles().length>0&&null!==this.selectedSaveData&&h.Z.isCartSave(this.mempackSaveData.getSaveFiles()[this.selectedSaveData])}},methods:{getFileListNames(){return null!==this.mempackSaveData&&null!==this.mempackSaveData.getSaveFiles()?this.mempackSaveData.getSaveFiles().map((e=>({displayText:h.Z.isCartSave(e)?`Cartridge save: ${d.Z.getDisplayName(e)}`:`${d.Z.getDisplayName(e)} (${e.regionName})`}))):[]},changeConversionDirection(e){this.conversionDirection=e,this.mempackSaveData=null,this.errorMessage=null,this.inputFilename=null,this.outputFilename=null,this.selectedSaveData=null},changeSelectedSaveData(e){this.mempackSaveData.getSaveFiles().length>0?(this.selectedSaveData=e,this.outputFilename=d.Z.createFilename(this.mempackSaveData.getSaveFiles()[this.selectedSaveData])):(this.selectedSaveData=null,this.outputFilename=null)},readMempackSaveData(e){this.errorMessage=null,this.selectedSaveData=null,this.inputFilename=e.filename;try{this.mempackSaveData=p.Z.createFromN64MempackData(e.arrayBuffer),this.changeSelectedSaveData(0)}catch(a){this.errorMessage="File appears to not be in the correct format",this.mempackSaveData=null,this.selectedSaveData=null}},readEmulatorSaveData(e){this.errorMessage=null,this.selectedSaveData=null,this.inputFilename=null;try{let a=e.map((e=>({parsedFilename:d.Z.parseFilename(e.filename),rawData:e.arrayBuffer})));a=a.map((e=>({noteName:e.parsedFilename.noteName,noteNameExtension:e.parsedFilename.noteNameExtension,gameSerialCode:e.parsedFilename.gameSerialCode,publisherCode:e.parsedFilename.publisherCode,rawData:e.rawData}))),this.mempackSaveData=p.Z.createFromSaveFiles(a),this.mempackSaveData.getSaveFiles().length>0?this.outputFilename=`${r.Z.convertDescriptionToFilename(this.mempackSaveData.getSaveFiles()[0].noteName)}.mpk`:this.outputFilename="output.mpk"}catch(a){this.errorMessage=a.message,this.mempackSaveData=null,this.selectedSaveData=null}},convertFile(){let e=null;e="convertToRaw"===this.conversionDirection?this.mempackSaveData.getSaveFiles()[this.selectedSaveData].rawData:this.mempackSaveData.getArrayBuffer();const a=new Blob([e],{type:"application/octet-stream"});(0,o.saveAs)(a,this.outputFilename)}}},D=g,S=t(1001),f=(0,S.Z)(D,i,s,!1,null,"3704ba49",null),F=f.exports,k={name:"N64MempackView",components:{ConvertN64Mempack:F}},b=k,C=(0,S.Z)(b,l,n,!1,null,null,null),w=C.exports}}]);