(self["webpackChunksave_file_converter"]=self["webpackChunksave_file_converter"]||[]).push([[137],{1649:function(t,e,r){"use strict";r.r(e),r.d(e,{default:function(){return b}});var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"home"},[e("Retron5EraseSave")],1)},a=[],o=function(){var t=this,e=t._self._c;return e("div",[e("b-container",[e("b-row",{attrs:{"no-gutters":"","align-h":"center","align-v":"start"}},[e("b-col",{attrs:{sm:"12",md:"5","align-self":"center"}},[e("b-row",{attrs:{"no-gutters":"","align-h":"center","align-v":"start"}},[e("b-col",{attrs:{cols:"12"}},[e("b-jumbotron",{attrs:{fluid:"","header-level":t._f("mq")(t.$mq,{xs:5,sm:5,md:5,lg:5,xl:4})},scopedSlots:t._u([{key:"header",fn:function(){return[t._v("Erase save using Retron 5")]},proxy:!0}])})],1)],1),e("input-file",{attrs:{errorMessage:this.errorMessage,placeholderText:"Choose a file to convert (*.sav)",acceptExtension:".sav",leaveRoomForHelpIcon:!1},on:{load:function(e){return t.readRetron5SaveData(e)}}})],1)],1),e("b-row",{staticClass:"justify-content-md-center",attrs:{"align-h":"center"}},[e("b-col",{attrs:{cols:"auto",sm:"4",md:"3",lg:"2","align-self":"center"}},[e("b-button",{staticClass:"retron5-erase-save-convert-button",attrs:{variant:"success",block:"",disabled:!this.retron5SaveData||!t.outputFilename},on:{click:function(e){return t.convertFile()}}},[t._v(" Convert! ")])],1)],1),e("hr"),e("b-row",[e("b-col",[e("div",{staticClass:"help"},[t._v(" Instructions: ")]),e("b-row",{staticClass:"justify-content-md-left, help",attrs:{"align-h":"center"}},[e("b-col",{attrs:{sm:"12",md:"6"}},[e("div",{staticClass:"help, text-left"},[e("ol",[e("li",[t._v("Use the Retron 5 to copy the save from the cartridge to an SD card")]),e("li",[t._v("Make a backup copy of the save from the SD card if you wish")]),e("li",[t._v("Convert the save from the SD card using this tool")]),e("li",[t._v("Overwrite the save on the SD card with the new one you just created")]),e("li",[t._v("Use the Retron 5 to copy the new save from the SD card to the cartridge")])])])])],1),e("div",{staticClass:"help"},[t._v(" Help: how do IÂ "),e("b-link",{attrs:{href:"https://projectpokemon.org/home/tutorials/save-editing/managing-gb-gbc-saves/using-the-retron-5-r53/"}},[t._v("copy files to and from my Retron 5")]),t._v("? ")],1)],1)],1)],1)],1)},s=[],i=r(3162),c=r(8390),l=r(146),u=r(1203),f=r(6332),h={name:"Retron5EraseSave",data(){return{retron5SaveData:null,errorMessage:null,outputFilename:null}},components:{InputFile:u.Z},methods:{readRetron5SaveData(t){this.errorMessage=null,this.outputFilename=null;try{this.retron5SaveData=f.Z.createFromRetron5Data(t.arrayBuffer),this.outputFilename=l.Z.getFilename(t.filename)}catch(e){this.errorMessage=e.message,this.retron5SaveData=null}},convertFile(){const t=c.Z.getEraseCartridgeSave(this.retron5SaveData.getRawArrayBuffer()),e=f.Z.createFromEmulatorData(t).getRetron5ArrayBuffer(),r=new Blob([e],{type:"application/octet-stream"});(0,i.saveAs)(r,this.outputFilename)}}},v=h,d=r(1001),g=(0,d.Z)(v,o,s,!1,null,"8539dc16",null),p=g.exports,y={name:"Retron5EraseSaveView",components:{Retron5EraseSave:p}},m=y,w=(0,d.Z)(m,n,a,!1,null,null,null),b=w.exports},6332:function(t,e,r){"use strict";r.d(e,{Z:function(){return S}});r(3767),r(8585),r(8696);var n=r(4606),a=r.n(n),o=r(146),s=r(7761),i=r(1897),c=r(8540);const l=!0,u="RTN5",f="US-ASCII",h=1,v=1,d=0,g=4,p=6,y=8,m=12,w=16,b=20,A=24;class S{static createFromRetron5Data(t){const e=new DataView(t);o.Z.checkMagic(t,d,u,f);const r=e.getUint16(g,l),n=e.getUint16(p,l),_=e.getUint32(y,l),C=e.getUint32(m,l),R=e.getUint32(w,l),U=e.getUint32(b,l);if(r>h)throw new Error("Sorry this tool does not support this format of Retron5 save files");if(R!==A)throw new Error("Sorry this file appears to be corrupted");const Z=t.byteLength-A;if(C!==Z)throw new Error("Sorry this file appears to be corrupted");let D=new Uint8Array(t.slice(R));if(0!==(n&v)&&(D=c.Z.decompress(D)),D.byteLength!==_)throw new Error("Sorry this file appears to be corrupted");const E=a().buf(D)>>>0;if(E!==U)throw new Error("Sorry this file appears to be corrupted");if(!s.Z.isPowerOf2(D.byteLength)){const t=i.Z.getPadFromStartValueAndCount(D);t.count>0&&(D=i.Z.removePaddingFromStart(D,t.count))}return new S(t,D)}static createFromEmulatorData(t){const e=a().buf(new Uint8Array(t))>>>0,r=c.Z.compress(t);let n=new ArrayBuffer(A);n=o.Z.setMagic(n,d,u,f);const s=new DataView(n);s.setUint16(g,h,l),s.setUint16(p,v,l),s.setUint32(y,t.byteLength,l),s.setUint32(m,r.byteLength,l),s.setUint32(w,A,l),s.setUint32(b,e,l);const i=o.Z.concatArrayBuffers([n,r]);return new S(i,t)}constructor(t,e){this.retron5ArrayBuffer=t,this.rawArrayBuffer=e}getRawArrayBuffer(){return this.rawArrayBuffer}getRetron5ArrayBuffer(){return this.retron5ArrayBuffer}}},8540:function(t,e,r){"use strict";r.d(e,{Z:function(){return a}});var n=r(7885);class a{static decompress(t){try{return n.ZP.inflate(t)}catch(e){throw new Error(`Could not decompress the data using zlib: ${e}`)}}static compress(t){try{return n.ZP.deflate(t)}catch(e){throw new Error(`Could not compress the data using zlib: ${e}`)}}}},8390:function(t,e,r){"use strict";r.d(e,{Z:function(){return n}});r(3767),r(8585),r(8696);class n{static resizeRawSave(t,e,r=0){let n=t;if(e<t.byteLength)n=t.slice(0,e);else if(e>t.byteLength){n=new ArrayBuffer(e);const a=new Uint8Array(n),o=new Uint8Array(t);a.fill(r),a.set(o,0)}return n}static getEraseCartridgeSave(t){const e=new ArrayBuffer(t.byteLength),r=new Uint8Array(e);return r.fill(0),e}}},4606:function(t,e){(function(t){"undefined"===typeof DO_NOT_EXPORT_CRC?t(e):t({})})((function(t){function e(){for(var t=0,e=new Array(256),r=0;256!=r;++r)t=r,t=1&t?-306674912^t>>>1:t>>>1,t=1&t?-306674912^t>>>1:t>>>1,t=1&t?-306674912^t>>>1:t>>>1,t=1&t?-306674912^t>>>1:t>>>1,t=1&t?-306674912^t>>>1:t>>>1,t=1&t?-306674912^t>>>1:t>>>1,t=1&t?-306674912^t>>>1:t>>>1,t=1&t?-306674912^t>>>1:t>>>1,e[r]=t;return"undefined"!==typeof Int32Array?new Int32Array(e):e}t.version="1.2.2";var r=e();function n(t){var e=0,r=0,n=0,a="undefined"!==typeof Int32Array?new Int32Array(4096):new Array(4096);for(n=0;256!=n;++n)a[n]=t[n];for(n=0;256!=n;++n)for(r=t[n],e=256+n;e<4096;e+=256)r=a[e]=r>>>8^t[255&r];var o=[];for(n=1;16!=n;++n)o[n-1]="undefined"!==typeof Int32Array?a.subarray(256*n,256*n+256):a.slice(256*n,256*n+256);return o}var a=n(r),o=a[0],s=a[1],i=a[2],c=a[3],l=a[4],u=a[5],f=a[6],h=a[7],v=a[8],d=a[9],g=a[10],p=a[11],y=a[12],m=a[13],w=a[14];function b(t,e){for(var n=-1^e,a=0,o=t.length;a<o;)n=n>>>8^r[255&(n^t.charCodeAt(a++))];return~n}function A(t,e){for(var n=-1^e,a=t.length-15,b=0;b<a;)n=w[t[b++]^255&n]^m[t[b++]^n>>8&255]^y[t[b++]^n>>16&255]^p[t[b++]^n>>>24]^g[t[b++]]^d[t[b++]]^v[t[b++]]^h[t[b++]]^f[t[b++]]^u[t[b++]]^l[t[b++]]^c[t[b++]]^i[t[b++]]^s[t[b++]]^o[t[b++]]^r[t[b++]];a+=15;while(b<a)n=n>>>8^r[255&(n^t[b++])];return~n}function S(t,e){for(var n=-1^e,a=0,o=t.length,s=0,i=0;a<o;)s=t.charCodeAt(a++),s<128?n=n>>>8^r[255&(n^s)]:s<2048?(n=n>>>8^r[255&(n^(192|s>>6&31))],n=n>>>8^r[255&(n^(128|63&s))]):s>=55296&&s<57344?(s=64+(1023&s),i=1023&t.charCodeAt(a++),n=n>>>8^r[255&(n^(240|s>>8&7))],n=n>>>8^r[255&(n^(128|s>>2&63))],n=n>>>8^r[255&(n^(128|i>>6&15|(3&s)<<4))],n=n>>>8^r[255&(n^(128|63&i))]):(n=n>>>8^r[255&(n^(224|s>>12&15))],n=n>>>8^r[255&(n^(128|s>>6&63))],n=n>>>8^r[255&(n^(128|63&s))]);return~n}t.table=r,t.bstr=b,t.buf=A,t.str=S}))}}]);